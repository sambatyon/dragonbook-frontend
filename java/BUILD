java_binary(
  name = "frontend",
  srcs = [
    "com/dragon/main/Main.java",
    "com/dragon/parser/Parser.java",
    "com/dragon/symbols/Array.java",
    "com/dragon/symbols/Env.java",
    "com/dragon/symbols/Type.java",
    "com/dragon/ast/Access.java",
    "com/dragon/ast/And.java",
    "com/dragon/ast/Arith.java",
    "com/dragon/ast/Break.java",
    "com/dragon/ast/Constant.java",
    "com/dragon/ast/Do.java",
    "com/dragon/ast/Else.java",
    "com/dragon/ast/Expr.java",
    "com/dragon/ast/Id.java",
    "com/dragon/ast/If.java",
    "com/dragon/ast/Logical.java",
    "com/dragon/ast/Node.java",
    "com/dragon/ast/Not.java",
    "com/dragon/ast/Op.java",
    "com/dragon/ast/Or.java",
    "com/dragon/ast/Rel.java",
    "com/dragon/ast/Seq.java",
    "com/dragon/ast/Set.java",
    "com/dragon/ast/SetElem.java",
    "com/dragon/ast/Stmt.java",
    "com/dragon/ast/Temp.java",
    "com/dragon/ast/Unary.java",
    "com/dragon/ast/While.java",
    "com/dragon/lexer/Lexer.java",
    "com/dragon/lexer/Num.java",
    "com/dragon/lexer/Real.java",
    "com/dragon/lexer/Tag.java",
    "com/dragon/lexer/Token.java",
    "com/dragon/lexer/Word.java",
  ],
  main_class = "com.dragon.main.Main"
)

java_test(
  name = "frontend_tests",
  srcs = [
    "com/dragon/main/FrontEndTests.java",
    "com/dragon/lexer/LexerTests.java",
    "com/dragon/ast/ExprTests.java",
    "com/dragon/ast/StmtTests.java",
    "com/dragon/parser/ParserTests.java",
  ],
  test_class = "com.dragon.main.FrontEndTests",
  deps = [
    ":frontend",
    "@maven//:junit_junit",
  ],
  size = "small",
  jvm_flags = ["-Djava.security.manager=allow"],
)
